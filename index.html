<!DOCTYPE html>
<html lang="zxx" class="js">

<head>
    <base href="../../">
    <meta charset="utf-8">
    <meta name="author" content="Softnio">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="@@page-discription">
    <!-- Fav Icon  -->
   
    <!-- Page Title  -->
    <title>VisDemo-OP</title>
    <!-- StyleSheets  -->
    <link rel="stylesheet" href="css/dashlite.css?ver=1.4.0">
    <link id="skin-default" rel="stylesheet" href="css/theme.css?ver=1.4.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>


	<style>
		html, body {
			height: 100%;
			margin: 0;
		}
		#map {
			width: 100%;
			height: 100%;
		}

    input[type=checkbox] {
    transform: scale(1.5);
}
	</style>


</head>

<body class="nk-body npc-covid has-sidebar has-sidebar-short ui-clean ui-rounder">
    <div class="nk-app-root">
        <!-- main @s -->
        <div class="nk-main" style="background-color: whitesmoke">
           
            <!-- wrap @s -->
            <div class="nk-wrap ">
              
               
                <!-- content @s -->
                <div class="nk-content ">
                    <div class="container-fluid">
                        <div class="nk-content-body">
                            <div class="nk-block-head nk-block-head-sm">
                                <div class="nk-block-between flex-wrap g-1 align-start">
                                    <div class="nk-block-head-content">
                                        <a href="html/op/opv.html" class="nk-block-title" style="font-size: 28px;">Security Summary for Terminal Operators</a>
                                    </div>
                                    <div class="nk-block-head-content">
                                        <p class="note-text">Updated: Sep 2, 2021 12:30 (GMT +6)</p>
                                    </div>
                                </div>
                            </div><!-- .nk-block-head -->
                           
                        </div>
                    </div>
                </div>
                <!-- content @e -->
              
            </div>
            <!-- wrap @e -->
        </div>
        <!-- main @e -->
    </div>
    
  

    <!-- app-root @e -->

    <script>

        let checkboxStates
        
        const jsontest = {"type": "FeatureCollection",
        "features": [
        
        {
         "type": "Feature",
         "geometry": {
            "type": "Point",
            "coordinates":  [22.17041015625,
                  60.42097096224303]
         },
         "properties": {
         "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"
         }
        },

        {
      "type": "Feature",
      "properties": {"Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.20302581787109,
          60.43029059808365
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {"Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.176246643066406,
          60.424317866142296
        ]
      }
    },

    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.190065383911133,
          60.42567347602639
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.192039489746094,
          60.42541930347811
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.165346145629883,
          60.41906434399841
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.18560218811035,
          60.423089295866475
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.187576293945312,
          60.423131661131464
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.18817710876465,
          60.428469242924386
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.190494537353516,
          60.42901989594342
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"risky",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.19212532043457,
          60.429951749036036
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"risky",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.17641830444336,
          60.41728473278787
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"risky",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.194185256958008,
          60.42330112163948
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.197790145874023,
          60.425758199767614
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.20233917236328,
          60.434907064472334
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.20499992370605,
          60.43452591318082
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"attacked",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.20834732055664,
          60.43621988470891
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"risky",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.2198486328125,
          60.43554230669233
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.22053527832031,
          60.43372124577595
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.223453521728516,
          60.43685510127025
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"attacked",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.214269638061523,
          60.431264769421716
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.208261489868164,
          60.43075650975716
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.185430526733395,
          60.42694430896449
        ]
      }
    },
    {
      "type": "Feature",
      "properties": { "Name":"Teatre Sant Andreu, Barcelona",
         "year":'1890',
         "month":"September",
         "days":"",
         "organiser":"Paz y Esperanza choir",
         "eventType":"healthy",
         "notes":"for working class communities"},
      "geometry": {
        "type": "Point",
        "coordinates": [
          22.195730209350586,
          60.431857728986664
        ]
      }
    },


        {
         "type": "Feature",
         "geometry": {
            "type": "Point",
            "coordinates":  [22.19701766967773,
                  60.42889282299763]
         },
         "properties": {
         "Name":"Café Méndez Núñez, Vigo\n",
         "year":'1893',
         "month":"September",
         "days":"21",
         "organiser":"Mr Shelton, from Chicago",
         "eventType":"healthy",
         "notes":""
         }
        }
        ]};
        
        var map = L.map('map', {

            center: [60.4336, 22.1930],//22.2177, 60.438  60.4216, 22.1982
            zoom: 14.49
                //center: [60.4349, 22.1892],
                //zoom: 14.19
               
            });
        
    

    var mbAttr = 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, ' +
			'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
		mbUrl = 'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw';

	  L.tileLayer(mbUrl, {id: 'mapbox/light-v9', tileSize: 512, zoomOffset: -1, attribution: mbAttr}).addTo(map)

        //L.control.layers(baseLayers, overlays).addTo(map);
        

    var geojsonMarkerOptions = {
              radius: 8,
              fillColor: "#ff7800",
              color: "#000",
              weight: 1,
              opacity: 1,
              fillOpacity: 0.8
          };

    const geojsonLayer = L.geoJSON(null,{


        filter: (feature) => {
            const isYearChecked = checkboxStates.years.includes(feature.properties.year)
            const isEventTypeChecked = checkboxStates.eventTypes.includes(feature.properties.eventType)
            return isYearChecked && isEventTypeChecked //only true if both are true
          }
           
           
      }).addTo(map)


        
    function updateCheckboxStates() {
            checkboxStates = {
              years: [],
              eventTypes: []
            }
          
            for (let input of document.querySelectorAll('input')) {
              if(input.checked) {
                switch (input.className) {
                  case 'event-type': checkboxStates.eventTypes.push(input.value); break
                  case 'year': checkboxStates.years.push(input.value); break
              }
            }
          }
        }
        
        
    for (let input of document.querySelectorAll('input')) {
          //Listen to 'change' event of all inputs
          input.onchange = (e) => {
            geojsonLayer.clearLayers()
              updateCheckboxStates()
            geojsonLayer.addData(jsontest)   
          }
        }
        
        /****** INIT ******/
    updateCheckboxStates()
    geojsonLayer.addData(jsontest)
            
    
            
    </script>


   
</body>
</html>
